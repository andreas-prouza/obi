
[general]

build-list="etc/build.toml"

dependency-list="etc/dependencytree.toml"

project-dir="~/projekte/opensource/ibm-i-build"
source-dir="src"
remote-dir="$HOME/ibm-i-build"

supported-object-types=['pgm', 'file', 'srvpgm']

[global]

[global.settings.general]

TGTRLS="*CURRENT"
DBGVIEW="*ALL"
ACTGRP="PROUZAGRP"
TGTCCSID="*JOB"

# *SOURCE = Default
#     Source directory will be used for lib
# {LIBNAME}
#     All objects will be compiled to that lib
#TARGET_LIB=*SOURCE

# Lib will be replaced by
TARGET_LIB_MAPPING={ "prouzalib"= "prouzat1", "prouzalib2"= "prouzat2" }

[global.settings."sqlrpgle.srvpgm"]
RPGPPOPT="*LVL2"
INCDIR="'src/prouzalib' 'src/prouzalib2'"
INCDIR_DOUBLE_QUOTED="''src/prouzalib'' ''src/prouzalib2''"
DBGVIEW="*SOURCE"


[global.steps]

"sqlrpgle.srvpgm"=[
  "global.compile-cmds.\"sqlrpgle.srvpgm\"", 
  "global.compile-cmds.bnddir-rmv", 
  "global.compile-cmds.srvpgm-crt", 
  "global.compile-cmds.bnddir-add",
  "check-error"]



[global.cmds]

chg-src-ccsid="CHGATR OBJ('$(SOURCE_FILE_NAME)') ATR(*CCSID) VALUE(1208)"

replace-special-chars-in-file-name="mv $(subst $$,'$$',$(subst #,#,$?)) $$(echo $(subst $$,'$$',$(subst #,\\#,$?)) | sed -e 's/'$$'\\302''//g'),"

ccsid-conf="| iconv -f IBM-1252 -t utf-8"

pre-compile=""
post-compile=""
finaly=""

check-error=""


[global.compile-cmds]

bnddir-rmv=""
bnddir-add=""
srvpgm-crt=""


"sqlrpgle.srvpgm"="""\
                CRTSQLRPGI OBJ($(TARGET_LIB)) SRCSTMF('$(SOURCE_FILE_NAME)') \
                OBJTYPE(*MODULE) RPGPPOPT(*LVL2) TGTRLS($(TGTRLS)) DBGVIEW($(DBGVIEW)) REPLACE(*YES) \
                COMPILEOPT('TGTCCSID($(TGTCCSID)) INCDIR($(INCDIR_DOUBLE_QUOTED))')\
                """
